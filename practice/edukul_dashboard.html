<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edukul ERP Dashboard</title>
<style>
/* Keep your previous CSS as-is */
:root{
  --primary:#2563eb; --bg:#f4f6f9; --card:#fff; --text:#222; 
  --accent:#0b76ef; --success:#16a34a; --warning:#f59e0b; --danger:#dc2626; --sidebar-width:220px;
}
*{box-sizing:border-box;}
body{margin:0;font-family:'Inter',Arial,sans-serif;background:var(--bg);color:var(--text);}
a{text-decoration:none;color:inherit;}
button{cursor:pointer;}
.sidebar{position:fixed;top:0;left:0;height:100%;width:var(--sidebar-width);background:var(--primary);display:flex;flex-direction:column;padding-top:20px;color:#fff;}
.sidebar h2{text-align:center;margin-bottom:30px;font-size:20px;}
.sidebar a{padding:12px 20px;display:block;color:#fff;margin:2px 0;border-radius:6px;transition:0.2s;}
.sidebar a.active,.sidebar a:hover{background:rgba(255,255,255,0.2);}
.main-content{margin-left:var(--sidebar-width);padding:20px;}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.topbar button{background:var(--danger);color:#fff;border:none;padding:8px 12px;border-radius:6px;}
.card{background:var(--card);padding:20px;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 6px rgba(0,0,0,0.05);}
form input, form select, form textarea{width:100%;padding:8px;margin:6px 0;border:1px solid #ddd;border-radius:6px;}
form button{padding:10px 16px;background:var(--primary);border:none;color:#fff;border-radius:6px;margin-top:10px;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{padding:10px;border-bottom:1px solid #eee;text-align:left;}
th{background:var(--primary);color:#fff;border-radius:6px;}
.section{display:none;transition:0.3s;}
@media(max-width:768px){.sidebar{width:60px;}.main-content{margin-left:60px;}.sidebar h2{display:none;}}
</style>
</head>
<body>

<div class="sidebar">
  <h2>Edukul ERP</h2>
  <a href="#" class="active" onclick="showSection('dashboard')">Dashboard</a>
  <a href="#" onclick="showSection('inquiries')">Inquiries</a>
  <a href="#" onclick="showSection('admissions')">Admissions</a>
  <a href="#" onclick="showSection('fee')">Fee</a>
  <a href="#" onclick="showSection('attendance')">Attendance</a>
  <a href="#" onclick="showSection('ptm')">PTM</a>
</div>

<div class="main-content">
  <div class="topbar">
    <div><strong>Role:</strong> Admin</div>
    <button onclick="logout()">Logout</button>
  </div>

  <div id="dashboard" class="section" style="display:block;">
    <div class="card">
      <h3>Welcome to Edukul ERP Dashboard</h3>
      <p>Select any module from the sidebar to manage data.</p>
    </div>
  </div>

  <!-- Inquiries -->
  <div id="inquiries" class="section">
    <div class="card">
      <h3>Add / Update Inquiry</h3>
      <form id="inquiryForm">
        <input type="hidden" id="inquiryId">
        <input type="text" id="studentName" placeholder="Student Name" required>
        <input type="text" id="contact" placeholder="Contact">
        <select id="inquiryType">
          <option value="Admission">Admission</option>
          <option value="Other">Other</option>
        </select>
        <input type="text" id="source" placeholder="Source">
        <input type="text" id="zone" placeholder="Zone">
        <button type="submit">Save Inquiry</button>
      </form>
    </div>
    <div class="card">
      <h3>Inquiry List</h3>
      <table>
        <thead>
          <tr><th>ID</th><th>Name</th><th>Contact</th><th>Type</th><th>Source</th><th>Zone</th><th>Status</th></tr>
        </thead>
        <tbody id="inquiryBody"></tbody>
      </table>
    </div>
  </div>

  <!-- Repeat similar structure for Admissions, Fee, Attendance, PTM -->

</div>

<script>
// ====== CONFIG ======
const API_URL = "https://script.google.com/macros/s/AKfycbx2g5LE-Tij7dk4z8_fDHOYBiw-nmuTqbH80ceq5HexhKPrNJ80KQgwPXwbE-WUWu4A/exec"; // Replace with your Apps Script Web App URL

// ====== Sidebar & Section Handling ======
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.sidebar a').forEach(a=>a.classList.remove('active'));
  document.querySelector(`.sidebar a[onclick="showSection('${id}')"]`).classList.add('active');
}
function logout(){alert("Logging out...");}

// ====== Fetch Helpers ======
async function fetchJSON(url){
  const res = await fetch(url, {method:'GET', mode:'cors'});
  return res.json();
}

async function postData(action, payload){
  const res = await fetch(API_URL+'?action='+action, {
    method:'POST',
    mode:'cors',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify(payload)
  });
  return res.json();
}

// ====== Load Tables ======
async function loadInquiries(){
  try{
    const data = await fetchJSON(API_URL+'?action=getInquiries');
    const tbody = document.getElementById('inquiryBody'); tbody.innerHTML='';
    (data||[]).forEach(r=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${r.ID||''}</td><td>${r.StudentName||''}</td><td>${r.Contact||''}</td><td>${r.Type||''}</td><td>${r.Source||''}</td><td>${r.Zone||''}</td><td>${r.Status||'Pending'}</td>`;
      tbody.appendChild(tr);
    });
  } catch(err){ console.error(err); }
}

// ====== Submit Handlers ======
document.getElementById('inquiryForm').onsubmit=async function(e){
  e.preventDefault();
  const payload={
    StudentName: document.getElementById('studentName').value,
    Contact: document.getElementById('contact').value,
    Type: document.getElementById('inquiryType').value,
    Source: document.getElementById('source').value,
    Zone: document.getElementById('zone').value
  };
  try{
    await postData('addInquiry', payload);
    this.reset();
    loadInquiries();
  } catch(err){ console.error(err); }
}

// ====== Initial Load ======
loadInquiries();
</script>
</body>
</html>
